"""{{ name }} agent implementation."""

from __future__ import annotations

from typing import Any

from pydantic import BaseModel, Field
from restack_ai.agent import agent


class {{ name }}Input(BaseModel):
    """Input schema for {{ name }} agent."""

    message: str = Field(..., description="Input message to process")


class {{ name }}Output(BaseModel):
    """Output schema for {{ name }} agent."""

    result: str = Field(..., description="Processing result")
    metadata: dict[str, Any] = Field(default_factory=dict, description="Additional metadata")


@agent(name="{{ name | snake_case }}")
class {{ name }}:
    """{{ description or name + ' agent' }}."""

    async def run(self, input_data: {{ name }}Input) -> {{ name }}Output:
        """
        Execute the agent's main workflow.

        Args:
            input_data: Input data for the agent

        Returns:
            {{ name }}Output: Processing result with metadata
        """
        # TODO: Implement agent logic
        result = f"Processed: {input_data.message}"

        return {{ name }}Output(
            result=result,
            metadata={
                "input_length": len(input_data.message),
                "agent_name": "{{ name | snake_case }}",
            },
        )
